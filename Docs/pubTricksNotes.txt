PubTricks

Goal:  Good looking live site to demo for .NET
		Today (Monday)
			Structure
			Watch videos again
			Build on the way
			
TDD!
	Keep presentation notes

	Web Platform Installer
		Azure SDK1.5
		

Elevator Speech
	"Pubtricks is where simply remembered and awesome pub tricks are captured on video, and offered to our users"

	go live:  Friday I want site up.
		
Platform
	ASP.NET MVC3 (becuase I know this toolstack)
	Azure


What do I need to do?
	
	
c:\dev\PubTricks - easy to get to
\Docs
\Lib - all 3rd party binaries
\Source

File new project
	PubTricks.Azure.. create a folder.. 
	Add in PubTricks.Web as MVC3 role
	
Add to source control
	git init
	put in .gitIgnore file
	git add .
	git add -am "Load"
	
Add a dropbox backup
	mkdir e:\dropbox\repositories\ptricks
	git remote add origin e:/dropbox/repositories/ptricks
	cd e:\dropbox\repositories\ptricks
	git init --bare
	git push origin master (from c:\dev\pubtricks)
	
	
Task Runner project - console app.

Rename Files
	Public
		Scripts to javascripts
	
fix links
CDN's
	
Publish to Azure
	Why Azure?  Why not.
	
Logging
	setup NLog.config to output to app_data/logs/ file.
	extract interface
	
IoC - Ninject

Dependency Injection pattern - put logger in home controller

Membership

TDD/BDD

Nunit

TestDriven.NET
	Alt T, and Alt D

CodeSnippets Manager

GIT 
	IDE link
	feature branch
	  git branch
	  git checkout -b membership


	
First Test - a_new_trick_should_be_saved_to_db_on_save()
	
SQL Server
Tricks
	ID
	Name
	Description
	VideoURL
	DateCreated
	  
Get writing to db working using Massive
	  
Clear database before every test 
	setup
	  
getting logging working on the test projects
		directory isn't quite right.. 

		
Membership was a bit harder than it should be.
		
----
Design - Video 3

	3 themese for USD70
		biznizz
		inspire
		Apz
		

Elevator Speech
	"Pubtricks is where simply remembered and awesome pub tricks are captured on video, and offered to our users"
	
Website Front End User Stories:
	As a person going to the pub, I want an easy trick to remember so that I can entertain my friends
	
	As a returning user of the site I want to see if there are any new videos
	
	As a person going to the pub I want to see what is the highest rated trick 
	
	
	As a parent going to the pub with children, I want a kid friendly trick so I can keep them happy, and they can show their friends
	
	As a random browser of the site I want to understand immediately what the site is for
	
	As a smartphone user in the pub, I want to be able to check out tricks on video so I can be awesome in front of friends
	

Development User Stories
	As a presenter I want a polished front end site that has wow factor
	
	As a business apps developer I want a good back end including crud, validation and testing, so I can reuse learning

	
Other Sites
	youtube.com
	
	
Front End Features:
	Had a feedback tab thing
	
	Email me when anohter trick is published
	
	Newsletter

	Ability to upload pub tricks
	
Back End Features
	easily crud tricks
	easily manage whole system

	
http://www.woothemes.com/2011/08/swatch/   - free one

Bought a theme
	made in Wordpress
	got it working 
	copied html
	refactored css and js
	got it rendering
	

making theme into what I want layout to be like and refactoring to make simpler

/
	latest
	mostPopular

/category/comedy
/category/kids

/category/all
	
/trick/uncross-your-arms
/trick/the-kids-pen-trick


helpers and functions - great and easy
	getting a compile error when put on Azure
		[didn't work]try redploy whole thing
		[yes]works locally in Azure
		[yes]works on Azure when I comment out
		[no]try rename helper method to QuotesHelper
		look for other helpers
		@helper UserHelper(string quote) {
			<div class="quote">
				@*@Scrub(quote)*@
				@quote
			</div>    
		}\
		[properties tag wasn't set to output as content]
	

**Keith - how does he remember likes?	
**site to Phil - up to date?
**site off to Keith for front end feedback

--------
Data - Video 4

Baby steps to get things right.	
	
A user views a Trick video and reveal video 
A Trick can be in a Category
	

Write tests to help guide thinking
	**this is really good**

Then share with team and get feedback


ORM
	EF
		Guids as PK's.... Rob doesn't like
	MVC Scaffolding
	Massive
	

Controlers - RESTfully

Developing up /tricks controller
	Doing it manually
	
	Templates changing

Using own html helper methods
	
	
validation thoughts

front end wire in
like functionality

authentication wire in for admin

build out test cases and look for edge cases 
get lots of content on the site!	

contact page.
---------------
Massive

getting into the heart of it and stripping it back

get tests passing again

build up Massive from the ground

get controller working simply with no cruddy abstraction.

Create
	Votes in database isn't going through from create to db
	Likes on screen, but @Model.Votes in view.
	FormCollection is coming though as Likes
	
Create not working in VidPub original
	download again.
	not working in downloaded version

----
See what Rob has to say in Video5
	
unobtrusive validation

authentication on controller


make front end pull from database tricks table
	simple razor syntax

why js?  Write less server code, and write a more compelling and responsive application.

jquery templates to help display on the frontend?
	
make an ApplicationController to handle auth?

--------------
TODO - Monday
[doing]CName

[done]1. details page
		/tricks/2   - goes to a trick with ID of 2
		/tricks/pen-trick  - goes to a trick with ID of 2 (with magic happening - this is the name of the trick)
		
		/tricks - shows all tricks
		/categories/kids - shows all tricks in the category kids
		
		
		/admin/tricks/create
		/admin/tricks/delete
		/admin/tricks/edit/2
		/admin/categories/edit/5 - Kids category edit 
		
TODO Tuesday
	Review and see where I'm going - Develop apps fast which are what user needs, are testable, and we can deliver in stages as requirements change
														Entrepreneurial style.  Simple is good.
														
		Projects I'm going to be working on:
			PocketVouchers - lots of tables.. want to know the app is working, want to know when it slows down on live!
			FaceBook app - a good number of tables, high performance, TDD/BDD essential

	
[done]1. like functionality
		[done]implement a cookie so a use can only vote for each trick once
		[done]turn off tweet/facebook stuff/email
		
[done]2. Text on slider bar, hyperlink in slider bar to details page.. good static images..styley....use own photos?... make slider smaller
	<div class="text bottom">
	<div class="text top">
		http://www.flickr.com/photos/si/2406409/sizes/o/in/photostream/  - Simon Hammond
		http://www.flickr.com/photos/mrlerone/75159252/ - Tony Bradbury
		http://www.flickr.com/photos/fabulousterrah/3336330479/ - Fabulour Terrah
		
		760*451 is the original size of the images


[done]3. Most popular Tabs working

[done]3.2 Take off search box

[done]3.3 put on Google analytics

[done]upload proper verison to Azure
[doing]Send to Phil and Nora

3.5  TDD/BDD focus on the whole site - what can/can't should/shouldn't I test?
			what if URL is wrong?
				
				
	Testing Strategy in MVC3
		look at unit test framework for mvc3
			TDD/BDD MVC3
			
			validation
				TricksSpecs and on view (HTML5)
		
			default values eg Votes = 0
				where to handle
					if the form returns a number as votes, we want to handle it fine
					if the form returns a string with non numberics we want to handle it.
					
				build out and simplify tests / code
					make controller talk to massive more!
					
				if editing it is not letting us save, as there is a 'duplicate' name in the db.
		
			routing - what if routing is wrong
			http://bradwilson.typepad.com/blog/2010/07/testing-routing-and-url-generation-in-aspnet-mvc.html
				
			
		testing in MVC3 google
		types of testing specs, functional..higher?
		massive test (lower)

4. Admin BDD features
		fix up admin so can enter all details in create screen as well as edit (merge two together?)

4. Categories and other tables.. build out complexity to be like other applications.. and their tests
		Cruddy controller

   Auto document from Specs
		
5. Admin CSS strip out


Chris Feedback
	What should be in Model
	What should be in Controller
	How stuff is displayed in view
		picture of how query is done and what the types are.
	
	Validation on server side if html5 doesn't work
		in model
	Validation on database?
	
	run in offline mode for HP
		jQuery
			put in a switch for offline.
		videos?
		
	Testing
		start with file new project and do TDD..
			doesn't matter if can't fill in tests?

			
UserVoice for feedback.
actually do a facebook like thing.

bring in Add/Edit roles from project found yesterday
	http://webadvert.codeplex.com/


-------
Technologies used (in order)
	www.tekpub.com - Real World ASP.NET MVC3
	Unfuddle - project mgt
	Dropbox
	Azure1.5
	MVC3
	Git
	NuGet
	NLog - help to debug easily
	Ninject - keep things decoupled and easy.
	Azure Web deploy
	ASP.NET Membership
	jQuery
	jQuery cycle
	Massive
	MVC Code Templates (T4)
	
	
CodeSmells
	FakeLogger - use DI
	
issues with VidPub
	insert not working properly... hacking massive a problem?
		eg insert a new user doesn't insert password correctly.. wrong number of parameters
---------------
Presentation Notes:
	
	Why not use Silverlight?
	
	
	